<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
<title>Tire-UB</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="TireUnblocker can help you get through internet filters and bypass them to search the web privately.">
<meta name="keywords" content="TireUnblocker, bypass filters, web privacy">
<meta name="author" content="TireUnblocker Team">

<script src="/scram/scramjet.all.js"></script>
<script src="/baremux/index.js"></script>

<link rel="stylesheet" href="index.css">
<script src="register-sw.js" defer></script>
<script src="search.js" defer></script>
<script src="index.js" defer></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: "Pixelify Sans", sans-serif;
}

#container {
  position: relative;
  width: 100vw;
  height: 100vh;
}

#frame {
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  border: none;
  z-index: 1;
}

.sidebar {
  list-style: none;
  margin: 0;
  padding: 0;
  width: 250px;
  height: 100%;
  position: fixed;
  top: 0;
  left: -250px;
  background: black;
  transition: left 0.5s ease;
  z-index: 2;
}

.nav-item a {
  display: block;
  color: white;
  padding: 14px;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
}

.nav-item a:hover {
  background: #444;
}

#fsbutton {
  position: absolute;
  top: 10px;
  left: 10px;
  width: 40px;
  height: 40px;
  z-index: 3;
  border-radius: 50%;
  border: 2px solid white;
  background: #333;
  color: white;
  cursor: pointer;
}

.blurred {
  filter: brightness(70%) blur(5px);
}
</style>

<div id="container">
  <ul class="sidebar" id="sidebar">
    <li class="nav-item"><a onclick="home()">Home</a></li>
    <li class="nav-item"><a onclick="games()">Games</a></li>
    <li class="nav-item"><a onclick="apps()">Apps</a></li>
    
    </li>
  </ul>

  <button id="fsbutton" onclick="toggleSidebar()">☰</button>

  <iframe id="frame" src="home.html"></iframe>
</div>

<script>
var frame = document.getElementById("frame");

function clearSearchIframes() {
  document.querySelectorAll("iframe").forEach((iframe) => {
    if (iframe.id !== "frame") iframe.remove();
  });
}

function home() {
  clearSearchIframes();
  frame.src = "/home.html";
}

function games() {
  clearSearchIframes();
  loadScramjetURL("https://truffled.lol/g");
}

function apps() {
  clearSearchIframes();
  loadScramjetURL("https://truffled.lol/a");
}

function toggleSidebar() {
  const sidebar = document.getElementById("sidebar");
  const button = document.getElementById("fsbutton");

  if (sidebar.style.left === "0px") {
    sidebar.style.left = "-250px";
    frame.style.left = "0";
    frame.style.width = "100vw";
    frame.classList.remove("blurred");
    button.textContent = "☰";
  } else {
    sidebar.style.left = "0";
    frame.style.left = "250px";
    frame.style.width = "calc(100vw - 250px)";
    frame.classList.add("blurred");
    button.textContent = "✕";
  }
}

let bareReady = false;
window.addEventListener("load", () => {
  fetch("/scramjet/about:blank")
    .then(() => bareReady = true)
    .catch(() => bareReady = false);
});

function loadScramjetURL(url) {
  if (!bareReady) {
    setTimeout(() => loadScramjetURL(url), 100);
    return;
  }
  frame.src = `/scramjet/${url}`;
}
</script>
 